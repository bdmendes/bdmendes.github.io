---
layout: default
title: Poetry
---

{% assign texts = site.poetry | sort: "number" | reverse %}

<input
  type="text"
  id="searchInput"
  placeholder="Pesquisar poemas..."
  class="box p-2 w-full mb-4 rounded-lg">

<div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
  {% for text in texts %}
    <div class="box poetry-item {% if forloop.index > 12 %}hidden{% endif %}">
      <a href="{{ text.url }}" class="box">
        <img
          loading="lazy"
          src="/assets/background/{{ text.background }}"
          alt="{{ text.title }}"
          class="aspect-[2/1] object-cover mx-auto w-full max-w-sm sm:max-w-full" />
      </a>
      <div class="px-2 py-1 w-full">
        <a href="{{ text.url }}" class="text-inherit text-center poem-title">{{ text.title }}</a>
      </div>
    </div>
  {% endfor %}
</div>

<div class="flex">
  <button id="showMore" class="box p-2 mx-auto rounded-full mt-4">Ver mais</button>
</div>

<style>
  #showMore:checked ~ .grid .box.hidden {
    display: block;
  }
</style>

<script>
  // Show More functionality
  document.getElementById("showMore").addEventListener("click", function() {
    // Show the next 12 hidden boxes
    const hiddenBoxes = document.querySelectorAll('.grid .box.hidden');
    for (let i = 0; i < 12 && i < hiddenBoxes.length; i++) {
      hiddenBoxes[i].classList.remove('hidden');
    }

    if (document.querySelectorAll('.grid .box.hidden').length === 0) {
      this.style.display = 'none';
    }
  });

  // Search functionality
  document.getElementById("searchInput").addEventListener("input", function() {
    const query = this.value.toLowerCase();
    const items = document.querySelectorAll('.poetry-item');

    // Hide "Show More" if input is not empty
    if (query.length > 0) {
      document.getElementById('showMore').style.display = 'none';
    } else if (document.querySelectorAll('.grid .box.hidden').length > 0) {
      document.getElementById('showMore').style.display = 'block';
    }

    // Show first 12 results
    let found = 0;
    items.forEach(function(item) {
      const title = item.querySelector('.poem-title').textContent.toLowerCase();
      if (found < 12 && title.trim().includes(query.trim())) {
        item.classList.remove('hidden');
        found++;
      } else if (!item.classList.contains('hidden')) {
        item.classList.add('hidden');
      }
    });
  });
</script>