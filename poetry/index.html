---
layout: default
title: Poetry
---

{% assign texts = site.poetry | sort: "number" | reverse %}

<input
  type="text"
  id="searchInput"
  placeholder="Pesquisar poemas..."
  class="box p-2 w-full mb-4 rounded-lg">

<div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
  {% for text in texts %}
    <div class="box poetry-item {% if forloop.index > 9 %}hidden{% endif %}">
      <a href="{{ text.url }}" class="box">
        <img
          loading="lazy"
          src="/assets/background/{{ text.background }}"
          alt="{{ text.title }}"
          class="aspect-[2/1] object-cover mx-auto w-full max-w-sm sm:max-w-full" />
      </a>
      <div class="px-2 py-1 w-full">
        <a href="{{ text.url }}" class="text-inherit text-center poem-title">{{ text.title }}</a>
      </div>
    </div>
  {% endfor %}
</div>

<div class="flex mt-4">
  <button id="showMore" class="box p-2 mx-auto rounded-full">Ver mais</button>
</div>

<style>
  #showMore:checked ~ .grid .box.hidden {
    display: block;
  }

  #content {
    min-width: 100%;
  }
</style>

<script>
  // Show More functionality
  document.getElementById("showMore").addEventListener("click", function() {
    // Show the next 9 hidden boxes
    const hiddenBoxes = document.querySelectorAll('.grid .box.hidden');
    for (let i = 0; i < 9 && i < hiddenBoxes.length; i++) {
      hiddenBoxes[i].classList.remove('hidden');
    }

    if (document.querySelectorAll('.grid .box.hidden').length === 0) {
      this.style.display = 'none';
    }
  });

  // Search functionality
  document.getElementById("searchInput").addEventListener("input", function() {
    const query = this.value.toLowerCase();
    const items = document.querySelectorAll('.poetry-item');

    items.forEach(function(item) {
      const title = item.querySelector('.poem-title').textContent.toLowerCase();
      if (title.trim().includes(query.trim())) {
        item.classList.remove('hidden');
      } else {
        item.classList.add('hidden');
      }
    });

    // Adjust the visibility of the "Show More" button based on search results
    const hiddenBoxes = document.querySelectorAll('.grid .poetry-item.hidden');
    const visibleBoxes = document.querySelectorAll('.grid .poetry-item:not(.hidden)');
    
    if (visibleBoxes.length > 9) {
      document.getElementById("showMore").style.display = 'block';
      visibleBoxes.forEach(function(box, index) {
        if (index >= 9) {
          box.classList.add('hidden');
        }
      });
    } else {
      document.getElementById("showMore").style.display = 'none';
    }
  });
</script>